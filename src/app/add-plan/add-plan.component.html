<app-header [loggedIn]="true">
  <ul class="user-menu" menu-btn="menu">
    <li><a>Dashboard</a></li>
    <li><a>Next trip</a></li>
    <li><a>Previous trip</a></li>
    <li class="logout">
      <a routerLink="/homepage" (click)="logout()"><i class="fa fa-sign-in" aria-hidden="true"></i></a>
    </li>
  </ul>
</app-header>

<div class="flex-row">
  <section class="box full-section planner">
    <div class="header">
      <h3>Hi! Let's plan your next trip to <span *ngIf="data">{{data.location}}</span> <i class="fa fa-plane"
          aria-hidden="true"></i> {{days}} days</h3>
    </div>
    <div class="container">
      <div class="row-container">
        <mat-horizontal-stepper #stepper (selectionChange)="changed($event)">
          <mat-step *ngFor="let tab of tabs; let i = index">
            <ng-template matStepLabel>{{tab}}</ng-template>
            <app-planner [location]="data.location" (newLocation)="addMarker($event)" [day]="i"
              (eventsList)="addEvents($event)" [coord]="coordonate"></app-planner>
          </mat-step>
        </mat-horizontal-stepper>

        <div class="map-container">
          <agm-map [zoom]="zoom" [latitude]="lat" [longitude]="lng">
            <agm-marker *ngFor="let location of locationList" [latitude]="location.lat" [longitude]="location.lng">
            </agm-marker>
            <ng-container *ngFor="let days of coords; let i = index">
              <ng-container *ngIf="days.length > 1">
                <agm-direction [origin]="days[0]" [destination]="days[days.length - 1]" [waypoints]="waypoints[i]">
                </agm-direction>
              </ng-container>
            </ng-container>
          </agm-map>
        </div>
      </div>

      <app-button type="secondary" (click)="savePlan()">Save plan</app-button>
    </div>
  </section>

</div>